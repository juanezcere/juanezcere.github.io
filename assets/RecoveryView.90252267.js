import{A as y}from"./AlertMessage.d56dc4a9.js";import{_ as v,L as e,r as _,o as a,c as d,d as b,b as l,t as m,w as f,F as w,e as k,a as u}from"./index.d64a1a32.js";const M="http://52.22.141.239:3000/",x={props:["token","updateToken"],data(){return{moduleName:"recovery",title:e[e.selected].recovery.title,Model:class{constructor(t){this.username=t.username||"",this.password=t.password||"",this.password2=t.password2||""}},fields:[{name:"username",type:"email",placeholder:e[e.selected].recovery.username,required:!0,validation:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,message:e[e.selected].login.err_username},{name:"password",type:"password",placeholder:e[e.selected].recovery.password,required:!0,message:e[e.selected].login.err_password},{name:"password2",type:"password",placeholder:e[e.selected].recovery.password2,required:!0,message:e[e.selected].login.err_password},{name:"submit",type:"submit",placeholder:e[e.selected].recovery.update}]}},created(){this.token?this.$router.push("/"):this.model=new this.Model({})},methods:{showMessage(s,t){this.$refs.AlertMessage.show(s,t)},showPassword(){var s=document.getElementById("password");s.type==="password"?s.type="text":s.type="password"},update(s,t,n){let c=!1,i="rounded border border-dark p-1";this.fields[s].validation&&(c=!String(n.value).toLowerCase().match(this.fields[s].validation)),c?i="rounded border border-danger p-1":i="rounded border border-success p-1",c&&this.showMessage(this.fields[s].message,"warning"),this.model[t]=n.value,n.className=i},async login(){if(this.model.username==""||this.model.password==""||this.models.password2=="")return this.showMessage(e[e.selected].login.err_fields,"error");if(this.model.password!=this.models.password2)return this.showMessage(e[e.selected].recovery.err_password,"error");try{const s={method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({username:this.model.username,password:this.model.password})},n=await(await fetch(M+this.moduleName,s)).json();this.showMessage(e[e.selected].recovery.success,"success"),this.$router.push("/login")}catch(s){console.log(s),this.showMessage(e[e.selected].login.err_login,"error")}}},components:{AlertMessage:y}},A={class:"row pt-3 w-100"},N={class:"col-auto mx-auto"},C={class:"card text-center m-5 p-5 bg-dark text-light"},S={class:"card-title px-3 py-3"},P={id:"moduleTitle"},B={class:"card-body"},L=["type","placeholder","value","id","onInput","title"],T={key:3,class:"text-muted"};function V(s,t,n,c,i,o){const g=_("AlertMessage");return a(),d(w,null,[b(g,{ref:"AlertMessage",class:"row pt-1"},null,512),l("div",A,[l("div",N,[l("div",C,[l("div",S,[l("h3",P,m(i.title),1)]),l("div",B,[l("form",{onSubmit:t[2]||(t[2]=f((...r)=>o.login&&o.login(...r),["prevent"]))},[(a(!0),d(w,null,k(i.fields,(r,h)=>(a(),d("div",{key:h,class:"form-group py-3"},[r.type!="view"&&r.type!="submit"?(a(),d("input",{key:0,type:r.type,placeholder:r.placeholder,value:r.value,id:r.name,onInput:p=>o.update(h,r.name,p.target),"data-toggle":"tooltip","data-placement":"bottom",title:r.placeholder,class:"rounded border border-dark p-1"},null,40,L)):u("",!0),r.type=="password"?(a(),d("i",{key:1,class:"text-dark fa-solid fa-eye position-absolute",id:"togglePassword",onClick:t[0]||(t[0]=(...p)=>o.showPassword&&o.showPassword(...p)),style:{"margin-left":"-20px","margin-top":"7px",cursor:"pointer"}})):u("",!0),r.type=="submit"?(a(),d("button",{key:2,type:"button",onClick:t[1]||(t[1]=(...p)=>o.login&&o.login(...p)),class:"btn btn-light text-dark"},m(r.placeholder),1)):u("",!0),r.type=="view"?(a(),d("p",T,m(r.placeholder),1)):u("",!0)]))),128))],32)])])])])],64)}const z=v(x,[["render",V]]);export{z as default};
